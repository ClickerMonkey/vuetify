import '../../../stylus/components/_date-picker-table.styl';
// Directives
import Touch from '../../../directives/touch';
// Utils
import isDateAllowed from '.././util/isDateAllowed';
/* @vue/component */
export default {
    directives: { Touch },
    props: {
        allowedDates: Function,
        current: String,
        disabled: Boolean,
        format: {
            type: Function,
            default: null
        },
        locale: {
            type: String,
            default: 'en-us'
        },
        min: String,
        max: String,
        scrollable: Boolean,
        tableDate: {
            type: String,
            required: true
        },
        value: [String, Array]
    },
    data: () => ({
        defaultColor: 'accent',
        isReversing: false
    }),
    computed: {
        computedTransition() {
            return (this.isReversing === !this.$vuetify.rtl) ? 'tab-reverse-transition' : 'tab-transition';
        },
        displayedMonth() {
            return this.tableDate.split('-')[1] - 1;
        },
        displayedYear() {
            return this.tableDate.split('-')[0] * 1;
        }
    },
    watch: {
        tableDate(newVal, oldVal) {
            this.isReversing = newVal < oldVal;
        }
    },
    methods: {
        genButtonClasses(value, isAllowed, isFloating) {
            const isSelected = value === this.value || (Array.isArray(this.value) && this.value.indexOf(value) !== -1);
            const isCurrent = value === this.current;
            const classes = {
                'v-btn--active': isSelected,
                'v-btn--flat': !isSelected,
                'v-btn--icon': isSelected && isAllowed && isFloating,
                'v-btn--floating': isFloating,
                'v-btn--depressed': !isFloating && isSelected,
                'v-btn--disabled': !isAllowed || (this.disabled && isSelected),
                'v-btn--outline': isCurrent && !isSelected,
                ...this.themeClasses
            };
            if (isSelected)
                return this.addBackgroundColorClassChecks(classes);
            if (isCurrent)
                return this.addTextColorClassChecks(classes);
            return classes;
        },
        genButton(value, isFloating) {
            const isAllowed = isDateAllowed(value, this.min, this.max, this.allowedDates);
            return this.$createElement('button', {
                staticClass: 'v-btn',
                'class': this.genButtonClasses(value, isAllowed, isFloating),
                attrs: {
                    type: 'button'
                },
                domProps: {
                    disabled: !isAllowed,
                    innerHTML: `<div class="v-btn__content">${this.formatter(value)}</div>`
                },
                on: (this.disabled || !isAllowed) ? {} : {
                    click: () => this.$emit('input', value)
                }
            });
        },
        wheel(e) {
            e.preventDefault();
            this.$emit('tableDate', this.calculateTableDate(e.deltaY));
        },
        touch(value) {
            this.$emit('tableDate', this.calculateTableDate(value));
        },
        genTable(staticClass, children) {
            const transition = this.$createElement('transition', {
                props: { name: this.computedTransition }
            }, [this.$createElement('table', { key: this.tableDate }, children)]);
            const touchDirective = {
                name: 'touch',
                value: {
                    left: e => (e.offsetX < -15) && this.touch(1),
                    right: e => (e.offsetX > 15) && this.touch(-1)
                }
            };
            return this.$createElement('div', {
                staticClass,
                class: this.themeClasses,
                on: this.scrollable ? { wheel: this.wheel } : undefined,
                directives: [touchDirective]
            }, [transition]);
        }
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1waWNrZXItdGFibGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9WRGF0ZVBpY2tlci9taXhpbnMvZGF0ZS1waWNrZXItdGFibGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxvREFBb0QsQ0FBQTtBQUUzRCxhQUFhO0FBQ2IsT0FBTyxLQUFLLE1BQU0sMkJBQTJCLENBQUE7QUFFN0MsUUFBUTtBQUNSLE9BQU8sYUFBYSxNQUFNLHlCQUF5QixDQUFBO0FBRW5ELG9CQUFvQjtBQUNwQixlQUFlO0lBQ2IsVUFBVSxFQUFFLEVBQUUsS0FBSyxFQUFFO0lBRXJCLEtBQUssRUFBRTtRQUNMLFlBQVksRUFBRSxRQUFRO1FBQ3RCLE9BQU8sRUFBRSxNQUFNO1FBQ2YsUUFBUSxFQUFFLE9BQU87UUFDakIsTUFBTSxFQUFFO1lBQ04sSUFBSSxFQUFFLFFBQVE7WUFDZCxPQUFPLEVBQUUsSUFBSTtTQUNkO1FBQ0QsTUFBTSxFQUFFO1lBQ04sSUFBSSxFQUFFLE1BQU07WUFDWixPQUFPLEVBQUUsT0FBTztTQUNqQjtRQUNELEdBQUcsRUFBRSxNQUFNO1FBQ1gsR0FBRyxFQUFFLE1BQU07UUFDWCxVQUFVLEVBQUUsT0FBTztRQUNuQixTQUFTLEVBQUU7WUFDVCxJQUFJLEVBQUUsTUFBTTtZQUNaLFFBQVEsRUFBRSxJQUFJO1NBQ2Y7UUFDRCxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDO0tBQ3ZCO0lBRUQsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDWCxZQUFZLEVBQUUsUUFBUTtRQUN0QixXQUFXLEVBQUUsS0FBSztLQUNuQixDQUFDO0lBRUYsUUFBUSxFQUFFO1FBQ1Isa0JBQWtCO1lBQ2hCLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsd0JBQXdCLENB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U0FBUztnQkFDdkQsVUFBVSxFQUFFLENBQUMsY0FBYyxDQUFDO2FBQzdCLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFBO1FBQ2xCLENBQUM7S0FDRjtDQUNGLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJy4uLy4uLy4uL3N0eWx1cy9jb21wb25lbnRzL19kYXRlLXBpY2tlci10YWJsZS5zdHlsJ1xuXG4vLyBEaXJlY3RpdmVzXG5pbXBvcnQgVG91Y2ggZnJvbSAnLi4vLi4vLi4vZGlyZWN0aXZlcy90b3VjaCdcblxuLy8gVXRpbHNcbmltcG9ydCBpc0RhdGVBbGxvd2VkIGZyb20gJy4uLy4vdXRpbC9pc0RhdGVBbGxvd2VkJ1xuXG4vKiBAdnVlL2NvbXBvbmVudCAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBkaXJlY3RpdmVzOiB7IFRvdWNoIH0sXG5cbiAgcHJvcHM6IHtcbiAgICBhbGxvd2VkRGF0ZXM6IEZ1bmN0aW9uLFxuICAgIGN1cnJlbnQ6IFN0cmluZyxcbiAgICBkaXNhYmxlZDogQm9vbGVhbixcbiAgICBmb3JtYXQ6IHtcbiAgICAgIHR5cGU6IEZ1bmN0aW9uLFxuICAgICAgZGVmYXVsdDogbnVsbFxuICAgIH0sXG4gICAgbG9jYWxlOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnZW4tdXMnXG4gICAgfSxcbiAgICBtaW46IFN0cmluZyxcbiAgICBtYXg6IFN0cmluZyxcbiAgICBzY3JvbGxhYmxlOiBCb29sZWFuLFxuICAgIHRhYmxlRGF0ZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIHZhbHVlOiBbU3RyaW5nLCBBcnJheV1cbiAgfSxcblxuICBkYXRhOiAoKSA9PiAoe1xuICAgIGRlZmF1bHRDb2xvcjogJ2FjY2VudCcsXG4gICAgaXNSZXZlcnNpbmc6IGZhbHNlXG4gIH0pLFxuXG4gIGNvbXB1dGVkOiB7XG4gICAgY29tcHV0ZWRUcmFuc2l0aW9uICgpIHtcbiAgICAgIHJldHVybiAodGhpcy5pc1JldmVyc2luZyA9PT0gIXRoaXMuJHZ1ZXRpZnkucnRsKSA/ICd0YWItcmV2ZXJzZS10cmFuc2l0aW9uJyA6ICd0YWItdHJhbnNpdGlvbidcbiAgICB9LFxuICAgIGRpc3BsYXllZE1vbnRoICgpIHtcbiAgICAgIHJldHVybiB0aGlzLnRhYmxlRGF0ZS5zcGxpdCgnLScpWzFdIC0gMVxuICAgIH0sXG4gICAgZGlzcGxheWVkWWVhciAoKSB7XG4gICAgICByZXR1cm4gdGhpcy50YWJsZURhdGUuc3BsaXQoJy0nKVswXSAqIDFcbiAgICB9XG4gIH0sXG5cbiAgd2F0Y2g6IHtcbiAgICB0YWJsZURhdGUgKG5ld1ZhbCwgb2xkVmFsKSB7XG4gICAgICB0aGlzLmlzUmV2ZXJzaW5nID0gbmV3VmFsIDwgb2xkVmFsXG4gICAgfVxuICB9LFxuXG4gIG1ldGhvZHM6IHtcbiAgICBnZW5CdXR0b25DbGFzc2VzICh2YWx1ZSwgaXNBbGxvd2VkLCBpc0Zsb2F0aW5nKSB7XG4gICAgICBjb25zdCBpc1NlbGVjdGVkID0gdmFsdWUgPT09IHRoaXMudmFsdWUgfHwgKEFycmF5LmlzQXJyYXkodGhpcy52YWx1ZSkgJiYgdGhpcy52YWx1ZS5pbmRleE9mKHZhbHVlKSAhPT0gLTEpXG4gICAgICBjb25zdCBpc0N1cnJlbnQgPSB2YWx1ZSA9PT0gdGhpcy5jdXJyZW50XG5cbiAgICAgIGNvbnN0IGNsYXNzZXMgPSB7XG4gICAgICAgICd2LWJ0bi0tYWN0aXZlJzogaXNTZWxlY3RlZCxcbiAgICAgICAgJ3YtYnRuLS1mbGF0JzogIWlzU2VsZWN0ZWQsXG4gICAgICAgICd2LWJ0bi0taWNvbic6IGlzU2VsZWN0ZWQgJiYgaXNBbGxvd2VkICYmIGlzRmxvYXRpbmcsXG4gICAgICAgICd2LWJ0bi0tZmxvYXRpbmcnOiBpc0Zsb2F0aW5nLFxuICAgICAgICAndi1idG4tLWRlcHJlc3NlZCc6ICFpc0Zsb2F0aW5nICYmIGlzU2VsZWN0ZWQsXG4gICAgICAgICd2LWJ0bi0tZGlzYWJsZWQnOiAhaXNBbGxvd2VkIHx8ICh0aGlzLmRpc2FibGVkICYmIGlzU2VsZWN0ZWQpLFxuICAgICAgICAndi1idG4tLW91dGxpbmUnOiBpc0N1cnJlbnQgJiYgIWlzU2VsZWN0ZWQsXG4gICAgICAgIC4uLnRoaXMudGhlbWVDbGFzc2VzXG4gICAgICB9XG5cbiAgICAgIGlmIChpc1NlbGVjdGVkKSByZXR1cm4gdGhpcy5hZGRCYWNrZ3JvdW5kQ29sb3JDbGFzc0NoZWNrcyhjbGFzc2VzKVxuICAgICAgaWYgKGlzQ3VycmVudCkgcmV0dXJuIHRoaXMuYWRkVGV4dENvbG9yQ2xhc3NDaGVja3MoY2xhc3NlcylcbiAgICAgIHJldHVybiBjbGFzc2VzXG4gICAgfSxcbiAgICBnZW5CdXR0b24gKHZhbHVlLCBpc0Zsb2F0aW5nKSB7XG4gICAgICBjb25zdCBpc0FsbG93ZWQgPSBpc0RhdGVBbGxvd2VkKHZhbHVlLCB0aGlzLm1pbiwgdGhpcy5tYXgsIHRoaXMuYWxsb3dlZERhdGVzKVxuXG4gICAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1xuICAgICAgICBzdGF0aWNDbGFzczogJ3YtYnRuJyxcbiAgICAgICAgJ2NsYXNzJzogdGhpcy5nZW5CdXR0b25DbGFzc2VzKHZhbHVlLCBpc0FsbG93ZWQsIGlzRmxvYXRpbmcpLFxuICAgICAgICBhdHRyczoge1xuICAgICAgICAgIHR5cGU6ICdidXR0b24nXG4gICAgICAgIH0sXG4gICAgICAgIGRvbVByb3BzOiB7XG4gICAgICAgICAgZGlzYWJsZWQ6ICFpc0FsbG93ZWQsXG4gICAgICAgICAgaW5uZXJIVE1MOiBgPGRpdiBjbGFzcz1cInYtYnRuX19jb250ZW50XCI+JHt0aGlzLmZvcm1hdHRlcih2YWx1ZSl9PC9kaXY+YFxuICAgICAgICB9LFxuICAgICAgICBvbjogKHRoaXMuZGlzYWJsZWQgfHwgIWlzQWxsb3dlZCkgPyB7fSA6IHtcbiAgICAgICAgICBjbGljazogKCkgPT4gdGhpcy4kZW1pdCgnaW5wdXQnLCB2YWx1ZSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9LFxuICAgIHdoZWVsIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgIHRoaXMuJGVtaXQoJ3RhYmxlRGF0ZScsIHRoaXMuY2FsY3VsYXRlVGFibGVEYXRlKGUuZGVsdGFZKSlcbiAgICB9LFxuICAgIHRvdWNoICh2YWx1ZSkge1xuICAgICAgdGhpcy4kZW1pdCgndGFibGVEYXRlJywgdGhpcy5jYWxjdWxhdGVUYWJsZURhdGUodmFsdWUpKVxuICAgIH0sXG4gICAgZ2VuVGFibGUgKHN0YXRpY0NsYXNzLCBjaGlsZHJlbikge1xuICAgICAgY29uc3QgdHJhbnNpdGlvbiA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ3RyYW5zaXRpb24nLCB7XG4gICAgICAgIHByb3BzOiB7IG5hbWU6IHRoaXMuY29tcHV0ZWRUcmFuc2l0aW9uIH1cbiAgICAgIH0sIFt0aGlzLiRjcmVhdGVFbGVtZW50KCd0YWJsZScsIHsga2V5OiB0aGlzLnRhYmxlRGF0ZSB9LCBjaGlsZHJlbildKVxuXG4gICAgICBjb25zdCB0b3VjaERpcmVjdGl2ZSA9IHtcbiAgICAgICAgbmFtZTogJ3RvdWNoJyxcbiAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICBsZWZ0OiBlID0+IChlLm9mZnNldFggPCAtMTUpICYmIHRoaXMudG91Y2goMSksXG4gICAgICAgICAgcmlnaHQ6IGUgPT4gKGUub2Zmc2V0WCA+IDE1KSAmJiB0aGlzLnRvdWNoKC0xKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgIHN0YXRpY0NsYXNzLFxuICAgICAgICBjbGFzczogdGhpcy50aGVtZUNsYXNzZXMsXG4gICAgICAgIG9uOiB0aGlzLnNjcm9sbGFibGUgPyB7IHdoZWVsOiB0aGlzLndoZWVsIH0gOiB1bmRlZmluZWQsXG4gICAgICAgIGRpcmVjdGl2ZXM6IFt0b3VjaERpcmVjdGl2ZV1cbiAgICAgIH0sIFt0cmFuc2l0aW9uXSlcbiAgICB9XG4gIH1cbn1cbiJdfQ==