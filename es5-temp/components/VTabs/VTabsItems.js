// Mixins
import { provide as RegistrableProvide } from '../../mixins/registrable';
// Directives
import Touch from '../../directives/touch';
/* @vue/component */
export default {
    name: 'v-tabs-items',
    directives: { Touch },
    mixins: [RegistrableProvide('tabs')],
    inject: {
        registerItems: {
            default: null
        },
        tabProxy: {
            default: null
        },
        unregisterItems: {
            default: null
        }
    },
    props: {
        cycle: Boolean,
        touchless: Boolean,
        value: [Number, String]
    },
    data() {
        return {
            items: [],
            lazyValue: this.value,
            reverse: false
        };
    },
    computed: {
        activeIndex() {
            return this.items.findIndex((item, index) => {
                return item.id === this.lazyValue ||
                    index === this.lazyValue;
            });
        },
        activeItem() {
            if (!this.items.length)
                return undefined;
            return this.items[this.activeIndex];
        },
        inputValue: {
            get() {
                return this.lazyValue;
            },
            set(val) {
                this.lazyValue = val;
                if (this.tabProxy)
                    this.tabProxy(val);
                else
                    this.$emit('input', val);
            }
        }
    },
    watch: {
        activeIndex(current, previous) {
            this.reverse = current < previous;
            this.updateItems();
        },
        value(val) {
            this.lazyValue = val;
        }
    },
    mounted() {
        this.registerItems && this.registerItems(this.changeModel);
    },
    beforeDestroy() {
        this.unregisterItems && this.unregisterItems();
    },
    methods: {
        changeModel(val) {
            this.inputValue = val;
        },
        next(cycle) {
            let nextIndex = this.activeIndex + 1;
            if (!this.items[nextIndex]) {
                if (!cycle)
                    return;
                nextIndex = 0;
            }
            this.inputValue = this.items[nextIndex].id || nextIndex;
        },
        prev(cycle) {
            let prevIndex = this.activeIndex - 1;
            if (!this.items[prevIndex]) {
                if (!cycle)
                    return;
                prevIndex = this.items.length - 1;
            }
            this.inputValue = this.items[prevIndex].id || prevIndex;
        },
        onSwipe(action) {
            this[action](this.cycle);
        },
        register(item) {
            this.items.push(item);
        },
        unregister(item) {
            this.items = this.items.filter(i => i !== item);
        },
        updateItems() {
            for (let index = this.items.length; --index >= 0;) {
                this.items[index].toggle(this.activeIndex === index, this.reverse, this.isBooted);
            }
            this.isBooted = true;
        }
    },
    render(h) {
        const data = {
            staticClass: 'v-tabs__items',
            directives: []
        };
        !this.touchless && data.directives.push({
            name: 'touch',
            value: {
                left: () => this.onSwipe('next'),
                right: () => this.onSwipe('prev')
            }
        });
        return h('div', data, this.$slots.default);
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVlRhYnNJdGVtcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL1ZUYWJzL1ZUYWJzSXRlbXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsU0FBUztBQUNULE9BQU8sRUFDTCxPQUFPLElBQUksa0JBQWtCLEVBQzlCLE1BQU0sMEJBQTBCLENBQUE7QUFFakMsYUFBYTtBQUNiLE9BQU8sS0FBSyxNQUFNLHdCQUF3QixDQUFBO0FBRTFDLG9CQUFvQjtBQUNwQixlQUFlO0lBQ2IsSUFBSSxFQUFFLGNBQWM7SUFFcEIsVUFBVSxFQUFFLEVBQUUsS0FBSyxFQUFFO0lBRXJCLE1BQU0sRUFBRSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRXBDLE1BQU0sRUFBRTtRQUNOLGFBQWEsRUFBRTtZQUNiLE9BQU8sRUFBRSxJQUFJO1NBQ2Q7UUFDRCxRQUFRLEVBQUU7WUFDUixPQUFPLEVBQUUsSUFBSTtTQUNkO1FBQ0QsZUFBZSxFQUFFO1lBQ2YsT0FBTyxFQUFFLElBQUk7U0FDZDtLQUNGO0lBRUQsS0FBSyxFQUFFO1FBQ0wsS0FBSyxFQUFFLE9BQU87UUFDZCxTQUFTLEVBQUUsT0FBTztRQUNsQixLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0tBQ3hCO0lBRUQsSUFBSTtRQUNGLE9BQU87WUFDTCxLQUFLLEVBQUUsRUFBRTtZQUNULFNBQVMsRUFBRSxJQUFJLENBQUMsS0FBSztZQUNyQixPQUFPLEVBQUUsS0FBSztTQUNmLENBQUE7SUFDSCxDQUFDO0lBRUQsUUFBUSxFQUFFO1FBQ1IsV0FBVztZQUNULE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUU7Z0JBQzFDLE9BQU8sSUFBSSxDQUFDLEVBQUUsS0FBSyxJQUFJLENBQUMsU0FBUztvQkFDL0IsS0FBSyxLQUFLLElBQUksQ0FBQyxTQUFTLENBQUE7WUFDNUIsQ0FBQyxDQUFDLENBQUE7UUFDSixDQUFDO1FBQ0QsVUFBVTtZQUNSLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU07Z0JBQUUsT0FBTyxTQUFTLENBQUE7WUFFeEMsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQTtRQUNyQyxDQUFDO1FBQ0QsVUFBVSxFQUFFO1lBQ1YsR0FBRztnQkFDRCxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUE7WUFDdkIsQ0FBQztZQUNELEdBQUcsQ0FBRSxHQUFHO2dCQUNOLElBQUksQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFBO2dCQUVwQixJQUFJLElBQUksQ0FBQyxRQUFRO29CQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUE7O29CQUNoQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQTtZQUMvQixDQUFDO1NBQ0Y7S0FDRjtJQUVELEtBQUssRUFBRTtRQUNMLFdBQVcsQ0FBRSxPQUFPLEVBQUUsUUFBUTtZQUM1QixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sR0FBRyxRQUFRLENBQUE7WUFDakMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFBO1FBQ3BCLENBQUM7UUFDRCxLQUFLLENBQUUsR0FBRztZQUNSLElBQUksQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFBO1FBQ3RCLENBQUM7S0FDRjtJQUVELE9BQU87UUFDTCxJQUFJLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFBO0lBQzVELENBQUM7SUFFRCxhQUFhO1FBQ1gsSUFBSSxDQUFDLGVBQWUsSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUE7SUFDaEQsQ0FBQztJQUVELE9BQU8sRUFBRTtRQUNQLFdBQVcsQ0FBRSxHQUFHO1lBQ2QsSUFBSSxDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUE7UUFDdkIsQ0FBQztRQUNELElBQUksQ0FBRSxLQUFLO1lBQ1QsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUE7WUFFcEMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEVBQUU7Z0JBQzFCLElBQUksQ0FBQyxLQUFLO29CQUFFLE9BQU07Z0JBQ2xCLFNBQVMsR0FBRyxDQUFDLENBQUE7YUFDZDtZQUVELElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLElBQUksU0FBUyxDQUFBO1FBQ3pELENBQUM7UUFDRCxJQUFJLENBQUUsS0FBSztZQUNULElBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFBO1lBRXBDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxFQUFFO2dCQUMxQixJQUFJLENBQUMsS0FBSztvQkFBRSxPQUFNO2dCQUNsQixTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFBO2FBQ2xDO1lBRUQsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxTQUFTLENBQUE7UUFDekQsQ0FBQztRQUNELE9BQU8sQ0FBRSxNQUFNO1lBQ2IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUMxQixDQUFDO1FBQ0QsUUFBUSxDQUFFLElBQUk7WUFDWixJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUN2QixDQUFDO1FBQ0QsVUFBVSxDQUFFLElBQUk7WUFDZCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFBO1FBQ2pELENBQUM7UUFDRCxXQUFXO1lBQ1QsS0FBSyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxFQUFFLEtBQUssSUFBSSxDQUFDLEdBQUc7Z0JBQ2pELElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxXQUFXLEtBQUssS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO2FBQ2xGO1lBQ0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUE7UUFDdEIsQ0FBQztLQUNGO0lBRUQsTUFBTSxDQUFFLENBQUM7UUFDUCxNQUFNLElBQUksR0FBRztZQUNYLFdBQVcsRUFBRSxlQUFlO1lBQzVCLFVBQVUsRUFBRSxFQUFFO1NBQ2YsQ0FBQTtRQUVELENBQUMsSUFBSSxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQztZQUN0QyxJQUFJLEVBQUUsT0FBTztZQUNiLEtBQUssRUFBRTtnQkFDTCxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUM7Z0JBQ2hDLEtBQUssRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQzthQUNsQztTQUNGLENBQUMsQ0FBQTtRQUVGLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUM1QyxDQUFDO0NBQ0YsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8vIE1peGluc1xuaW1wb3J0IHtcbiAgcHJvdmlkZSBhcyBSZWdpc3RyYWJsZVByb3ZpZGVcbn0gZnJvbSAnLi4vLi4vbWl4aW5zL3JlZ2lzdHJhYmxlJ1xuXG4vLyBEaXJlY3RpdmVzXG5pbXBvcnQgVG91Y2ggZnJvbSAnLi4vLi4vZGlyZWN0aXZlcy90b3VjaCdcblxuLyogQHZ1ZS9jb21wb25lbnQgKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ3YtdGFicy1pdGVtcycsXG5cbiAgZGlyZWN0aXZlczogeyBUb3VjaCB9LFxuXG4gIG1peGluczogW1JlZ2lzdHJhYmxlUHJvdmlkZSgndGFicycpXSxcblxuICBpbmplY3Q6IHtcbiAgICByZWdpc3Rlckl0ZW1zOiB7XG4gICAgICBkZWZhdWx0OiBudWxsXG4gICAgfSxcbiAgICB0YWJQcm94eToge1xuICAgICAgZGVmYXVsdDogbnVsbFxuICAgIH0sXG4gICAgdW5yZWdpc3Rlckl0ZW1zOiB7XG4gICAgICBkZWZhdWx0OiBudWxsXG4gICAgfVxuICB9LFxuXG4gIHByb3BzOiB7XG4gICAgY3ljbGU6IEJvb2xlYW4sXG4gICAgdG91Y2hsZXNzOiBCb29sZWFuLFxuICAgIHZhbHVlOiBbTnVtYmVyLCBTdHJpbmddXG4gIH0sXG5cbiAgZGF0YSAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGl0ZW1zOiBbXSxcbiAgICAgIGxhenlWYWx1ZTogdGhpcy52YWx1ZSxcbiAgICAgIHJldmVyc2U6IGZhbHNlXG4gICAgfVxuICB9LFxuXG4gIGNvbXB1dGVkOiB7XG4gICAgYWN0aXZlSW5kZXggKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXRlbXMuZmluZEluZGV4KChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4gaXRlbS5pZCA9PT0gdGhpcy5sYXp5VmFsdWUgfHxcbiAgICAgICAgICBpbmRleCA9PT0gdGhpcy5sYXp5VmFsdWVcbiAgICAgIH0pXG4gICAgfSxcbiAgICBhY3RpdmVJdGVtICgpIHtcbiAgICAgIGlmICghdGhpcy5pdGVtcy5sZW5ndGgpIHJldHVybiB1bmRlZmluZWRcblxuICAgICAgcmV0dXJuIHRoaXMuaXRlbXNbdGhpcy5hY3RpdmVJbmRleF1cbiAgICB9LFxuICAgIGlucHV0VmFsdWU6IHtcbiAgICAgIGdldCAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxhenlWYWx1ZVxuICAgICAgfSxcbiAgICAgIHNldCAodmFsKSB7XG4gICAgICAgIHRoaXMubGF6eVZhbHVlID0gdmFsXG5cbiAgICAgICAgaWYgKHRoaXMudGFiUHJveHkpIHRoaXMudGFiUHJveHkodmFsKVxuICAgICAgICBlbHNlIHRoaXMuJGVtaXQoJ2lucHV0JywgdmFsKVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB3YXRjaDoge1xuICAgIGFjdGl2ZUluZGV4IChjdXJyZW50LCBwcmV2aW91cykge1xuICAgICAgdGhpcy5yZXZlcnNlID0gY3VycmVudCA8IHByZXZpb3VzXG4gICAgICB0aGlzLnVwZGF0ZUl0ZW1zKClcbiAgICB9LFxuICAgIHZhbHVlICh2YWwpIHtcbiAgICAgIHRoaXMubGF6eVZhbHVlID0gdmFsXG4gICAgfVxuICB9LFxuXG4gIG1vdW50ZWQgKCkge1xuICAgIHRoaXMucmVnaXN0ZXJJdGVtcyAmJiB0aGlzLnJlZ2lzdGVySXRlbXModGhpcy5jaGFuZ2VNb2RlbClcbiAgfSxcblxuICBiZWZvcmVEZXN0cm95ICgpIHtcbiAgICB0aGlzLnVucmVnaXN0ZXJJdGVtcyAmJiB0aGlzLnVucmVnaXN0ZXJJdGVtcygpXG4gIH0sXG5cbiAgbWV0aG9kczoge1xuICAgIGNoYW5nZU1vZGVsICh2YWwpIHtcbiAgICAgIHRoaXMuaW5wdXRWYWx1ZSA9IHZhbFxuICAgIH0sXG4gICAgbmV4dCAoY3ljbGUpIHtcbiAgICAgIGxldCBuZXh0SW5kZXggPSB0aGlzLmFjdGl2ZUluZGV4ICsgMVxuXG4gICAgICBpZiAoIXRoaXMuaXRlbXNbbmV4dEluZGV4XSkge1xuICAgICAgICBpZiAoIWN5Y2xlKSByZXR1cm5cbiAgICAgICAgbmV4dEluZGV4ID0gMFxuICAgICAgfVxuXG4gICAgICB0aGlzLmlucHV0VmFsdWUgPSB0aGlzLml0ZW1zW25leHRJbmRleF0uaWQgfHwgbmV4dEluZGV4XG4gICAgfSxcbiAgICBwcmV2IChjeWNsZSkge1xuICAgICAgbGV0IHByZXZJbmRleCA9IHRoaXMuYWN0aXZlSW5kZXggLSAxXG5cbiAgICAgIGlmICghdGhpcy5pdGVtc1twcmV2SW5kZXhdKSB7XG4gICAgICAgIGlmICghY3ljbGUpIHJldHVyblxuICAgICAgICBwcmV2SW5kZXggPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDFcbiAgICAgIH1cblxuICAgICAgdGhpcy5pbnB1dFZhbHVlID0gdGhpcy5pdGVtc1twcmV2SW5kZXhdLmlkIHx8IHByZXZJbmRleFxuICAgIH0sXG4gICAgb25Td2lwZSAoYWN0aW9uKSB7XG4gICAgICB0aGlzW2FjdGlvbl0odGhpcy5jeWNsZSlcbiAgICB9LFxuICAgIHJlZ2lzdGVyIChpdGVtKSB7XG4gICAgICB0aGlzLml0ZW1zLnB1c2goaXRlbSlcbiAgICB9LFxuICAgIHVucmVnaXN0ZXIgKGl0ZW0pIHtcbiAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLml0ZW1zLmZpbHRlcihpID0+IGkgIT09IGl0ZW0pXG4gICAgfSxcbiAgICB1cGRhdGVJdGVtcyAoKSB7XG4gICAgICBmb3IgKGxldCBpbmRleCA9IHRoaXMuaXRlbXMubGVuZ3RoOyAtLWluZGV4ID49IDA7KSB7XG4gICAgICAgIHRoaXMuaXRlbXNbaW5kZXhdLnRvZ2dsZSh0aGlzLmFjdGl2ZUluZGV4ID09PSBpbmRleCwgdGhpcy5yZXZlcnNlLCB0aGlzLmlzQm9vdGVkKVxuICAgICAgfVxuICAgICAgdGhpcy5pc0Jvb3RlZCA9IHRydWVcbiAgICB9XG4gIH0sXG5cbiAgcmVuZGVyIChoKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHN0YXRpY0NsYXNzOiAndi10YWJzX19pdGVtcycsXG4gICAgICBkaXJlY3RpdmVzOiBbXVxuICAgIH1cblxuICAgICF0aGlzLnRvdWNobGVzcyAmJiBkYXRhLmRpcmVjdGl2ZXMucHVzaCh7XG4gICAgICBuYW1lOiAndG91Y2gnLFxuICAgICAgdmFsdWU6IHtcbiAgICAgICAgbGVmdDogKCkgPT4gdGhpcy5vblN3aXBlKCduZXh0JyksXG4gICAgICAgIHJpZ2h0OiAoKSA9PiB0aGlzLm9uU3dpcGUoJ3ByZXYnKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gaCgnZGl2JywgZGF0YSwgdGhpcy4kc2xvdHMuZGVmYXVsdClcbiAgfVxufVxuIl19